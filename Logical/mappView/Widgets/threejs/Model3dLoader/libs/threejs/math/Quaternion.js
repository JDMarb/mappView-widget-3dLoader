/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./MathUtils"],(function(t,i,s){"use strict";var h=function(t){function h(t,i,s,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===h&&(h=1),this.isQuaternion=!0,this._x=t,this._y=i,this._z=s,this._w=h}h.slerp=function(t,i,s,h){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),s.slerpQuaternions(t,i,h)},h.slerpFlat=function(t,i,s,h,n,r,e){var _=s[h+0],a=s[h+1],o=s[h+2],u=s[h+3],c=n[r+0],l=n[r+1],y=n[r+2],x=n[r+3];if(0===e)return t[i+0]=_,t[i+1]=a,t[i+2]=o,void(t[i+3]=u);if(1===e)return t[i+0]=c,t[i+1]=l,t[i+2]=y,void(t[i+3]=x);if(u!==x||_!==c||a!==l||o!==y){var f=1-e,w=_*c+a*l+o*y+u*x,z=w>=0?1:-1,v=1-w*w;if(v>Number.EPSILON){var g=Math.sqrt(v),M=Math.atan2(g,w*z);f=Math.sin(f*M)/g,e=Math.sin(e*M)/g}var b=e*z;if(_=_*f+c*b,a=a*f+l*b,o=o*f+y*b,u=u*f+x*b,f===1-e){var m=1/Math.sqrt(_*_+a*a+o*o+u*u);_*=m,a*=m,o*=m,u*=m}}t[i]=_,t[i+1]=a,t[i+2]=o,t[i+3]=u},h.multiplyQuaternionsFlat=function(t,i,s,h,n,r){var e=s[h],_=s[h+1],a=s[h+2],o=s[h+3],u=n[r],c=n[r+1],l=n[r+2],y=n[r+3];return t[i]=e*y+o*u+_*l-a*c,t[i+1]=_*y+o*c+a*u-e*l,t[i+2]=a*y+o*l+e*c-_*u,t[i+3]=o*y-e*u-_*c-a*l,t};var n=h.prototype;return n.set=function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this._onChangeCallback(),this},n.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},n.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},n.setFromEuler=function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var s=t._x,h=t._y,n=t._z,r=t._order,e=Math.cos,_=Math.sin,a=e(s/2),o=e(h/2),u=e(n/2),c=_(s/2),l=_(h/2),y=_(n/2);switch(r){case"XYZ":this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y;break;case"YXZ":this._x=c*o*u+a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y;break;case"ZXY":this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u-c*l*y;break;case"ZYX":this._x=c*o*u-a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u+c*l*y;break;case"YZX":this._x=c*o*u+a*l*y,this._y=a*l*u+c*o*y,this._z=a*o*y-c*l*u,this._w=a*o*u-c*l*y;break;case"XZY":this._x=c*o*u-a*l*y,this._y=a*l*u-c*o*y,this._z=a*o*y+c*l*u,this._w=a*o*u+c*l*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return!1!==i&&this._onChangeCallback(),this},n.setFromAxisAngle=function(t,i){var s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this._onChangeCallback(),this},n.setFromRotationMatrix=function(t){var i=t.elements,s=i[0],h=i[4],n=i[8],r=i[1],e=i[5],_=i[9],a=i[2],o=i[6],u=i[10],c=s+e+u;if(c>0){var l=.5/Math.sqrt(c+1);this._w=.25/l,this._x=(o-_)*l,this._y=(n-a)*l,this._z=(r-h)*l}else if(s>e&&s>u){var y=2*Math.sqrt(1+s-e-u);this._w=(o-_)/y,this._x=.25*y,this._y=(h+r)/y,this._z=(n+a)/y}else if(e>u){var x=2*Math.sqrt(1+e-s-u);this._w=(n-a)/x,this._x=(h+r)/x,this._y=.25*x,this._z=(_+o)/x}else{var f=2*Math.sqrt(1+u-s-e);this._w=(r-h)/f,this._x=(n+a)/f,this._y=(_+o)/f,this._z=.25*f}return this._onChangeCallback(),this},n.setFromUnitVectors=function(t,i){var s=t.dot(i)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},n.angleTo=function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},n.rotateTowards=function(t,i){var s=this.angleTo(t);if(0===s)return this;var h=Math.min(1,i/s);return this.slerp(t,h),this},n.identity=function(){return this.set(0,0,0,1)},n.invert=function(){return this.conjugate()},n.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},n.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},n.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},n.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},n.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},n.multiply=function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},n.premultiply=function(t){return this.multiplyQuaternions(t,this)},n.multiplyQuaternions=function(t,i){var s=t._x,h=t._y,n=t._z,r=t._w,e=i._x,_=i._y,a=i._z,o=i._w;return this._x=s*o+r*e+h*a-n*_,this._y=h*o+r*_+n*e-s*a,this._z=n*o+r*a+s*_-h*e,this._w=r*o-s*e-h*_-n*a,this._onChangeCallback(),this},n.slerp=function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var s=this._x,h=this._y,n=this._z,r=this._w,e=r*t._w+s*t._x+h*t._y+n*t._z;if(e<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,e=-e):this.copy(t),e>=1)return this._w=r,this._x=s,this._y=h,this._z=n,this;var _=1-e*e;if(_<=Number.EPSILON){var a=1-i;return this._w=a*r+i*this._w,this._x=a*s+i*this._x,this._y=a*h+i*this._y,this._z=a*n+i*this._z,this.normalize(),this._onChangeCallback(),this}var o=Math.sqrt(_),u=Math.atan2(o,e),c=Math.sin((1-i)*u)/o,l=Math.sin(i*u)/o;return this._w=r*c+this._w*l,this._x=s*c+this._x*l,this._y=h*c+this._y*l,this._z=n*c+this._z*l,this._onChangeCallback(),this},n.slerpQuaternions=function(t,i,s){return this.copy(t).slerp(i,s)},n.random=function(){var t=Math.random(),i=Math.sqrt(1-t),s=Math.sqrt(t),h=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(i*Math.cos(h),s*Math.sin(n),s*Math.cos(n),i*Math.sin(h))},n.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},n.fromArray=function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},n.toArray=function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},n.fromBufferAttribute=function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},n._onChange=function(t){return this._onChangeCallback=t,this},n._onChangeCallback=function(){},n[t]=i.regeneratorRuntime().mark((function t(){return i.regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._w;case 8:case"end":return t.stop()}}),t,this)})),i.createClass(h,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}]),h}(Symbol.iterator);t.Quaternion=h,Object.defineProperty(t,"__esModule",{value:!0})}));
