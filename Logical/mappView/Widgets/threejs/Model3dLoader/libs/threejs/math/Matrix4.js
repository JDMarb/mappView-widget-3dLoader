/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","./Vector3"],(function(t,e){"use strict";var n=function(){function t(){t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var e=t.prototype;return e.set=function(t,e,n,r,s,i,o,a,h,u,l,c,m,f,v,x){var M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=r,M[1]=s,M[5]=i,M[9]=o,M[13]=a,M[2]=h,M[6]=u,M[10]=l,M[14]=c,M[3]=m,M[7]=f,M[11]=v,M[15]=x,this},e.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},e.clone=function(){return(new t).fromArray(this.elements)},e.copy=function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},e.copyPosition=function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},e.setFromMatrix3=function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this},e.extractBasis=function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},e.makeBasis=function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},e.extractRotation=function(t){var e=this.elements,n=t.elements,s=1/r.setFromMatrixColumn(t,0).length(),i=1/r.setFromMatrixColumn(t,1).length(),o=1/r.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},e.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,s=t.z,i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),h=Math.sin(r),u=Math.cos(s),l=Math.sin(s);if("XYZ"===t.order){var c=i*u,m=i*l,f=o*u,v=o*l;e[0]=a*u,e[4]=-a*l,e[8]=h,e[1]=m+f*h,e[5]=c-v*h,e[9]=-o*a,e[2]=v-c*h,e[6]=f+m*h,e[10]=i*a}else if("YXZ"===t.order){var x=a*u,M=a*l,y=h*u,p=h*l;e[0]=x+p*o,e[4]=y*o-M,e[8]=i*h,e[1]=i*l,e[5]=i*u,e[9]=-o,e[2]=M*o-y,e[6]=p+x*o,e[10]=i*a}else if("ZXY"===t.order){var d=a*u,z=a*l,k=h*u,g=h*l;e[0]=d-g*o,e[4]=-i*l,e[8]=k+z*o,e[1]=z+k*o,e[5]=i*u,e[9]=g-d*o,e[2]=-i*h,e[6]=o,e[10]=i*a}else if("ZYX"===t.order){var w=i*u,R=i*l,V=o*u,E=o*l;e[0]=a*u,e[4]=V*h-R,e[8]=w*h+E,e[1]=a*l,e[5]=E*h+w,e[9]=R*h-V,e[2]=-h,e[6]=o*a,e[10]=i*a}else if("YZX"===t.order){var F=i*a,X=i*h,Y=o*a,Z=o*h;e[0]=a*u,e[4]=Z-F*l,e[8]=Y*l+X,e[1]=l,e[5]=i*u,e[9]=-o*u,e[2]=-h*u,e[6]=X*l+Y,e[10]=F-Z*l}else if("XZY"===t.order){var A=i*a,C=i*h,P=o*a,S=o*h;e[0]=a*u,e[4]=-l,e[8]=h*u,e[1]=A*l+S,e[5]=i*u,e[9]=C*l-P,e[2]=P*l-C,e[6]=o*u,e[10]=S*l+A}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},e.makeRotationFromQuaternion=function(t){return this.compose(i,t,o)},e.lookAt=function(t,e,n){var r=this.elements;return u.subVectors(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),a.crossVectors(n,u),0===a.lengthSq()&&(1===Math.abs(n.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),a.crossVectors(n,u)),a.normalize(),h.crossVectors(u,a),r[0]=a.x,r[4]=h.x,r[8]=u.x,r[1]=a.y,r[5]=h.y,r[9]=u.y,r[2]=a.z,r[6]=h.z,r[10]=u.z,this},e.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},e.premultiply=function(t){return this.multiplyMatrices(t,this)},e.multiplyMatrices=function(t,e){var n=t.elements,r=e.elements,s=this.elements,i=n[0],o=n[4],a=n[8],h=n[12],u=n[1],l=n[5],c=n[9],m=n[13],f=n[2],v=n[6],x=n[10],M=n[14],y=n[3],p=n[7],d=n[11],z=n[15],k=r[0],g=r[4],w=r[8],R=r[12],V=r[1],E=r[5],F=r[9],X=r[13],Y=r[2],Z=r[6],A=r[10],C=r[14],P=r[3],S=r[7],_=r[11],b=r[15];return s[0]=i*k+o*V+a*Y+h*P,s[4]=i*g+o*E+a*Z+h*S,s[8]=i*w+o*F+a*A+h*_,s[12]=i*R+o*X+a*C+h*b,s[1]=u*k+l*V+c*Y+m*P,s[5]=u*g+l*E+c*Z+m*S,s[9]=u*w+l*F+c*A+m*_,s[13]=u*R+l*X+c*C+m*b,s[2]=f*k+v*V+x*Y+M*P,s[6]=f*g+v*E+x*Z+M*S,s[10]=f*w+v*F+x*A+M*_,s[14]=f*R+v*X+x*C+M*b,s[3]=y*k+p*V+d*Y+z*P,s[7]=y*g+p*E+d*Z+z*S,s[11]=y*w+p*F+d*A+z*_,s[15]=y*R+p*X+d*C+z*b,this},e.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},e.determinant=function(){var t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],i=t[1],o=t[5],a=t[9],h=t[13],u=t[2],l=t[6],c=t[10],m=t[14];return t[3]*(+s*a*l-r*h*l-s*o*c+n*h*c+r*o*m-n*a*m)+t[7]*(+e*a*m-e*h*c+s*i*c-r*i*m+r*h*u-s*a*u)+t[11]*(+e*h*l-e*o*m-s*i*l+n*i*m+s*o*u-n*h*u)+t[15]*(-r*o*u-e*a*l+e*o*c+r*i*l-n*i*c+n*a*u)},e.transpose=function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},e.setPosition=function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},e.invert=function(){var t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],o=t[5],a=t[6],h=t[7],u=t[8],l=t[9],c=t[10],m=t[11],f=t[12],v=t[13],x=t[14],M=t[15],y=l*x*h-v*c*h+v*a*m-o*x*m-l*a*M+o*c*M,p=f*c*h-u*x*h-f*a*m+i*x*m+u*a*M-i*c*M,d=u*v*h-f*l*h+f*o*m-i*v*m-u*o*M+i*l*M,z=f*l*a-u*v*a-f*o*c+i*v*c+u*o*x-i*l*x,k=e*y+n*p+r*d+s*z;if(0===k)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var g=1/k;return t[0]=y*g,t[1]=(v*c*s-l*x*s-v*r*m+n*x*m+l*r*M-n*c*M)*g,t[2]=(o*x*s-v*a*s+v*r*h-n*x*h-o*r*M+n*a*M)*g,t[3]=(l*a*s-o*c*s-l*r*h+n*c*h+o*r*m-n*a*m)*g,t[4]=p*g,t[5]=(u*x*s-f*c*s+f*r*m-e*x*m-u*r*M+e*c*M)*g,t[6]=(f*a*s-i*x*s-f*r*h+e*x*h+i*r*M-e*a*M)*g,t[7]=(i*c*s-u*a*s+u*r*h-e*c*h-i*r*m+e*a*m)*g,t[8]=d*g,t[9]=(f*l*s-u*v*s-f*n*m+e*v*m+u*n*M-e*l*M)*g,t[10]=(i*v*s-f*o*s+f*n*h-e*v*h-i*n*M+e*o*M)*g,t[11]=(u*o*s-i*l*s-u*n*h+e*l*h+i*n*m-e*o*m)*g,t[12]=z*g,t[13]=(u*v*r-f*l*r+f*n*c-e*v*c-u*n*x+e*l*x)*g,t[14]=(f*o*r-i*v*r-f*n*a+e*v*a+i*n*x-e*o*x)*g,t[15]=(i*l*r-u*o*r+u*n*a-e*l*a-i*n*c+e*o*c)*g,this},e.scale=function(t){var e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this},e.getMaxScaleOnAxis=function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},e.makeTranslation=function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},e.makeRotationX=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},e.makeRotationY=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},e.makeRotationZ=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},e.makeRotationAxis=function(t,e){var n=Math.cos(e),r=Math.sin(e),s=1-n,i=t.x,o=t.y,a=t.z,h=s*i,u=s*o;return this.set(h*i+n,h*o-r*a,h*a+r*o,0,h*o+r*a,u*o+n,u*a-r*i,0,h*a-r*o,u*a+r*i,s*a*a+n,0,0,0,0,1),this},e.makeScale=function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},e.makeShear=function(t,e,n,r,s,i){return this.set(1,n,s,0,t,1,i,0,e,r,1,0,0,0,0,1),this},e.compose=function(t,e,n){var r=this.elements,s=e._x,i=e._y,o=e._z,a=e._w,h=s+s,u=i+i,l=o+o,c=s*h,m=s*u,f=s*l,v=i*u,x=i*l,M=o*l,y=a*h,p=a*u,d=a*l,z=n.x,k=n.y,g=n.z;return r[0]=(1-(v+M))*z,r[1]=(m+d)*z,r[2]=(f-p)*z,r[3]=0,r[4]=(m-d)*k,r[5]=(1-(c+M))*k,r[6]=(x+y)*k,r[7]=0,r[8]=(f+p)*g,r[9]=(x-y)*g,r[10]=(1-(c+v))*g,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},e.decompose=function(t,e,n){var i=this.elements,o=r.set(i[0],i[1],i[2]).length(),a=r.set(i[4],i[5],i[6]).length(),h=r.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],s.copy(this);var u=1/o,l=1/a,c=1/h;return s.elements[0]*=u,s.elements[1]*=u,s.elements[2]*=u,s.elements[4]*=l,s.elements[5]*=l,s.elements[6]*=l,s.elements[8]*=c,s.elements[9]*=c,s.elements[10]*=c,e.setFromRotationMatrix(s),n.x=o,n.y=a,n.z=h,this},e.makePerspective=function(t,e,n,r,s,i){void 0===i&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*s/(e-t),h=2*s/(n-r),u=(e+t)/(e-t),l=(n+r)/(n-r),c=-(i+s)/(i-s),m=-2*i*s/(i-s);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=h,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},e.makeOrthographic=function(t,e,n,r,s,i){var o=this.elements,a=1/(e-t),h=1/(n-r),u=1/(i-s),l=(e+t)*a,c=(n+r)*h,m=(i+s)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},e.equals=function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},e.fromArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},e.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},t}(),r=new e.Vector3,s=new n,i=new e.Vector3(0,0,0),o=new e.Vector3(1,1,1),a=new e.Vector3,h=new e.Vector3,u=new e.Vector3;t.Matrix4=n,Object.defineProperty(t,"__esModule",{value:!0})}));
