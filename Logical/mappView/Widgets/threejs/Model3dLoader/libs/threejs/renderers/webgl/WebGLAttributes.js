/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports"],(function(e){"use strict";e.WebGLAttributes=function(e,t){var r=t.isWebGL2,f=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),f.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=f.get(t);r&&(e.deleteBuffer(r.buffer),f.delete(t))},update:function(t,n){if(t.isGLBufferAttribute){var a=f.get(t);(!a||a.version<t.version)&&f.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var i=f.get(t);void 0===i?f.set(t,function(t,f){var n,a=t.array,i=t.usage,u=e.createBuffer();if(e.bindBuffer(f,u),e.bufferData(f,a,i),t.onUploadCallback(),a instanceof Float32Array)n=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!r)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");n=5131}else n=5123;else if(a instanceof Int16Array)n=5122;else if(a instanceof Uint32Array)n=5125;else if(a instanceof Int32Array)n=5124;else if(a instanceof Int8Array)n=5120;else if(a instanceof Uint8Array)n=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);n=5121}return{buffer:u,type:n,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,n)):i.version<t.version&&(!function(t,f,n){var a=f.array,i=f.updateRange;e.bindBuffer(n,t),-1===i.count?e.bufferSubData(n,0,a):(r?e.bufferSubData(n,i.offset*a.BYTES_PER_ELEMENT,a,i.offset,i.count):e.bufferSubData(n,i.offset*a.BYTES_PER_ELEMENT,a.subarray(i.offset,i.offset+i.count)),i.count=-1)}(i.buffer,t,n),i.version=t.version)}}}},Object.defineProperty(e,"__esModule",{value:!0})}));
