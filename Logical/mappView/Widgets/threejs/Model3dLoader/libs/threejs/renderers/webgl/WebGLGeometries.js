/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../../core/BufferAttribute","../../utils"],(function(e,r,t){"use strict";e.WebGLGeometries=function(e,n,i,a){var o={},s=new WeakMap;function u(e){var r=e.target;for(var t in null!==r.index&&n.remove(r.index),r.attributes)n.remove(r.attributes[t]);r.removeEventListener("dispose",u),delete o[r.id];var v=s.get(r);v&&(n.remove(v),s.delete(r)),a.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,i.memory.geometries--}function v(e){var i=[],a=e.index,o=e.attributes.position,u=0;if(null!==a){var v=a.array;u=a.version;for(var f=0,d=v.length;f<d;f+=3){var l=v[f+0],m=v[f+1],c=v[f+2];i.push(l,m,m,c,c,l)}}else{var g=o.array;u=o.version;for(var p=0,b=g.length/3-1;p<b;p+=3){var y=p+0,h=p+1,x=p+2;i.push(y,h,h,x,x,y)}}var A=new(t.arrayNeedsUint32(i)?r.Uint32BufferAttribute:r.Uint16BufferAttribute)(i,1);A.version=u;var B=s.get(e);B&&n.remove(B),s.set(e,A)}return{get:function(e,r){return!0===o[r.id]||(r.addEventListener("dispose",u),o[r.id]=!0,i.memory.geometries++),r},update:function(e){var r=e.attributes;for(var t in r)n.update(r[t],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)n.update(o[s],34962)},getWireframeAttribute:function(e){var r=s.get(e);if(r){var t=e.index;null!==t&&r.version<t.version&&v(e)}else v(e);return s.get(e)}}},Object.defineProperty(e,"__esModule",{value:!0})}));
