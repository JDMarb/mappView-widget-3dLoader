/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../math/Matrix4","../math/Vector2","../math/Vector3","../math/Vector4","../math/Frustum"],(function(t,i,r,s,e,a){"use strict";var o=new i.Matrix4,n=new s.Vector3,u=new s.Vector3,m=function(){function t(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new r.Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new i.Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new a.Frustum,this._frameExtents=new r.Vector2(1,1),this._viewportCount=1,this._viewports=[new e.Vector4(0,0,1,1)]}var s=t.prototype;return s.getViewportCount=function(){return this._viewportCount},s.getFrustum=function(){return this._frustum},s.updateMatrices=function(t){var i=this.camera,r=this.matrix;n.setFromMatrixPosition(t.matrixWorld),i.position.copy(n),u.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(u),i.updateMatrixWorld(),o.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(i.projectionMatrix),r.multiply(i.matrixWorldInverse)},s.getViewport=function(t){return this._viewports[t]},s.getFrameExtents=function(){return this._frameExtents},s.dispose=function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()},s.copy=function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},s.clone=function(){return(new this.constructor).copy(this)},s.toJSON=function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t},t}();t.LightShadow=m,Object.defineProperty(t,"__esModule",{value:!0})}));
