/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","../objects/LineSegments","../math/Matrix4","../materials/LineBasicMaterial","../math/Color","../math/Vector3","../core/BufferGeometry","../core/BufferAttribute"],(function(t,e,r,o,i,n,a,s,l){"use strict";var p=new a.Vector3,u=new o.Matrix4,h=new o.Matrix4,c=function(t){function r(e){for(var r,o=f(e),a=new s.BufferGeometry,p=[],u=[],h=new n.Color(0,0,1),c=new n.Color(0,1,0),d=0;d<o.length;d++){var m=o[d];m.parent&&m.parent.isBone&&(p.push(0,0,0),p.push(0,0,0),u.push(h.r,h.g,h.b),u.push(c.r,c.g,c.b))}a.setAttribute("position",new l.Float32BufferAttribute(p,3)),a.setAttribute("color",new l.Float32BufferAttribute(u,3));var x=new i.LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,x)||this).isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=o,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return e.inheritsLoose(r,t),r.prototype.updateMatrixWorld=function(e){var r=this.bones,o=this.geometry,i=o.getAttribute("position");h.copy(this.root.matrixWorld).invert();for(var n=0,a=0;n<r.length;n++){var s=r[n];s.parent&&s.parent.isBone&&(u.multiplyMatrices(h,s.matrixWorld),p.setFromMatrixPosition(u),i.setXYZ(a,p.x,p.y,p.z),u.multiplyMatrices(h,s.parent.matrixWorld),p.setFromMatrixPosition(u),i.setXYZ(a+1,p.x,p.y,p.z),a+=2)}o.getAttribute("position").needsUpdate=!0,t.prototype.updateMatrixWorld.call(this,e)},r}(r.LineSegments);function f(t){var e=[];!0===t.isBone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,f(t.children[r]));return e}t.SkeletonHelper=c,Object.defineProperty(t,"__esModule",{value:!0})}));
