/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../../math/Color","./Path","./Shape","../ShapeUtils"],(function(t,r,e,n,h){"use strict";var u=function(){function t(){this.type="ShapePath",this.color=new r.Color,this.subPaths=[],this.currentPath=null}var u=t.prototype;return u.moveTo=function(t,r){return this.currentPath=new e.Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r),this},u.lineTo=function(t,r){return this.currentPath.lineTo(t,r),this},u.quadraticCurveTo=function(t,r,e,n){return this.currentPath.quadraticCurveTo(t,r,e,n),this},u.bezierCurveTo=function(t,r,e,n,h,u){return this.currentPath.bezierCurveTo(t,r,e,n,h,u),this},u.splineThru=function(t){return this.currentPath.splineThru(t),this},u.toShapes=function(t,r){function e(t){for(var r=[],e=0,h=t.length;e<h;e++){var u=t[e],i=new n.Shape;i.curves=u.curves,r.push(i)}return r}function u(t,r){for(var e=r.length,n=!1,h=e-1,u=0;u<e;h=u++){var i=r[h],s=r[u],a=s.x-i.x,o=s.y-i.y;if(Math.abs(o)>Number.EPSILON){if(o<0&&(i=r[u],a=-a,s=r[h],o=-o),t.y<i.y||t.y>s.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{var f=o*(t.x-i.x)-a*(t.y-i.y);if(0===f)return!0;if(f<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(s.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=s.x)return!0}}return n}var i,s,a,o=h.ShapeUtils.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===r)return e(f);var c=[];if(1===f.length)return s=f[0],(a=new n.Shape).curves=s.curves,c.push(a),c;var v=!o(f[0].getPoints());v=t?!v:v;var l,p,P=[],x=[],y=[],g=0;x[g]=void 0,y[g]=[];for(var S=0,T=f.length;S<T;S++)i=o(l=(s=f[S]).getPoints()),(i=t?!i:i)?(!v&&x[g]&&g++,x[g]={s:new n.Shape,p:l},x[g].s.curves=s.curves,v&&g++,y[g]=[]):y[g].push({h:s,p:l[0]});if(!x[0])return e(f);if(x.length>1){for(var b=!1,C=0,d=0,w=x.length;d<w;d++)P[d]=[];for(var m=0,q=x.length;m<q;m++)for(var z=y[m],M=0;M<z.length;M++){for(var N=z[M],O=!0,U=0;U<x.length;U++)u(N.p,x[U].p)&&(m!==U&&C++,O?(O=!1,P[U].push(N)):b=!0);O&&P[m].push(N)}C>0&&!1===b&&(y=P)}for(var _=0,j=x.length;_<j;_++){a=x[_].s,c.push(a);for(var k=0,E=(p=y[_]).length;k<E;k++)a.holes.push(p[k].h)}return c},t}();t.ShapePath=u,Object.defineProperty(t,"__esModule",{value:!0})}));
