/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../utils","../math/Color","../math/ColorManagement"],(function(e,t,a,n){"use strict";var i,r=function(){function e(){}return e.getDataURL=function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var a;if(e instanceof HTMLCanvasElement)a=e;else{void 0===i&&(i=t.createElementNS("canvas")),i.width=e.width,i.height=e.height;var n=i.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),a=i}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")},e.sRGBToLinear=function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t.createElementNS("canvas");a.width=e.width,a.height=e.height;var i=a.getContext("2d");i.drawImage(e,0,0,e.width,e.height);for(var r=i.getImageData(0,0,e.width,e.height),o=r.data,g=0;g<o.length;g++)o[g]=255*n.SRGBToLinear(o[g]/255);return i.putImageData(r,0,0),a}if(e.data){for(var s=e.data.slice(0),d=0;d<s.length;d++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[d]=Math.floor(255*n.SRGBToLinear(s[d]/255)):s[d]=n.SRGBToLinear(s[d]);return{data:s,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e},e}();e.ImageUtils=r,Object.defineProperty(e,"__esModule",{value:!0})}));
