/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./FileLoader","./Loader","../extras/core/ShapePath"],(function(e,t,r,a,n){"use strict";var o=function(e){function a(t){return e.call(this,t)||this}t.inheritsLoose(a,e);var n=a.prototype;return n.load=function(e,t,a,n){var o=this,s=new r.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,(function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var a=o.parse(r);t&&t(a)}),a,n)},n.parse=function(e){return new s(e)},a}(a.Loader),s=function(){function e(e){this.isFont=!0,this.type="Font",this.data=e}return e.prototype.generateShapes=function(e,t){void 0===t&&(t=100);for(var r=[],a=function(e,t,r){for(var a=Array.from(e),n=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*n,s=[],u=0,h=0,c=0;c<a.length;c++){var l=a[c];if("\n"===l)u=0,h-=o;else{var p=i(l,n,u,h,r);u+=p.offsetX,s.push(p.path)}}return s}(e,t,this.data),n=0,o=a.length;n<o;n++)r.push.apply(r,a[n].toShapes());return r},e}();function i(e,t,r,a,o){var s=o.glyphs[e]||o.glyphs["?"];if(s){var i,u,h,c,l,p,f,d,v=new n.ShapePath;if(s.o)for(var y=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),g=0,b=y.length;g<b;){switch(y[g++]){case"m":i=y[g++]*t+r,u=y[g++]*t+a,v.moveTo(i,u);break;case"l":i=y[g++]*t+r,u=y[g++]*t+a,v.lineTo(i,u);break;case"q":h=y[g++]*t+r,c=y[g++]*t+a,l=y[g++]*t+r,p=y[g++]*t+a,v.quadraticCurveTo(l,p,h,c);break;case"b":h=y[g++]*t+r,c=y[g++]*t+a,l=y[g++]*t+r,p=y[g++]*t+a,f=y[g++]*t+r,d=y[g++]*t+a,v.bezierCurveTo(l,p,f,d,h,c)}}return{offsetX:s.ha*t,path:v}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+o.familyName+".")}e.Font=s,e.FontLoader=o,Object.defineProperty(e,"__esModule",{value:!0})}));
