/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./CompressedTextureLoader"],(function(e,t,r){"use strict";var i=function(e){function r(t){return e.call(this,t)||this}return t.inheritsLoose(r,e),r.prototype.parse=function(e,t){var r=new n(e,1);return{mipmaps:r.mipmaps(t),width:r.pixelWidth,height:r.pixelHeight,format:r.glInternalFormat,isCubemap:6===r.numberOfFaces,mipmapCount:r.numberOfMipmapLevels}},r}(r.CompressedTextureLoader),n=function(){function e(e,t){this.arrayBuffer=e;var r=new Uint8Array(this.arrayBuffer,0,12);if(171===r[0]&&75===r[1]&&84===r[2]&&88===r[3]&&32===r[4]&&49===r[5]&&49===r[6]&&187===r[7]&&13===r[8]&&10===r[9]&&26===r[10]&&10===r[11]){var i=Uint32Array.BYTES_PER_ELEMENT,n=new DataView(this.arrayBuffer,12,13*i),s=67305985===n.getUint32(0,!0);this.glType=n.getUint32(1*i,s),this.glTypeSize=n.getUint32(2*i,s),this.glFormat=n.getUint32(3*i,s),this.glInternalFormat=n.getUint32(4*i,s),this.glBaseInternalFormat=n.getUint32(5*i,s),this.pixelWidth=n.getUint32(6*i,s),this.pixelHeight=n.getUint32(7*i,s),this.pixelDepth=n.getUint32(8*i,s),this.numberOfArrayElements=n.getUint32(9*i,s),this.numberOfFaces=n.getUint32(10*i,s),this.numberOfMipmapLevels=n.getUint32(11*i,s),this.bytesOfKeyValueData=n.getUint32(12*i,s),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===t?this.loadType=0:console.warn("number of faces expected"+t+", but found "+this.numberOfFaces):console.warn("texture arrays not currently supported"):console.warn("only 2D textures currently supported")):console.warn("only compressed formats currently supported")}else console.error("texture missing KTX identifier")}return e.prototype.mipmaps=function(e){for(var t=[],r=64+this.bytesOfKeyValueData,i=this.pixelWidth,n=this.pixelHeight,s=e?this.numberOfMipmapLevels:1,a=0;a<s;a++){var p=new Int32Array(this.arrayBuffer,r,1)[0];r+=4;for(var u=0;u<this.numberOfFaces;u++){var h=new Uint8Array(this.arrayBuffer,r,p);t.push({data:h,width:i,height:n}),r+=p,r+=3-(p+3)%4}i=Math.max(1,.5*i),n=Math.max(1,.5*n)}return t},e}();e.KTXLoader=i,Object.defineProperty(e,"__esModule",{value:!0})}));
