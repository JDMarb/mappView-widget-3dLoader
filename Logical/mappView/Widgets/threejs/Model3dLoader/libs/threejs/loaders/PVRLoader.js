/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./CompressedTextureLoader","../constants"],(function(r,e,a,t){"use strict";var o=function(r){function a(e){return r.call(this,e)||this}return e.inheritsLoose(a,r),a.prototype.parse=function(r,e){var a=new Uint32Array(r,0,13),o={buffer:r,header:a,loadMipmaps:e};return 55727696===a[0]?function(r){var e,a,o=r.header,i=o[12],m=o[2],p=o[6],s=o[7],u=o[10],P=o[11];switch(m){case 0:e=2,a=t.RGB_PVRTC_2BPPV1_Format;break;case 1:e=2,a=t.RGBA_PVRTC_2BPPV1_Format;break;case 2:e=4,a=t.RGB_PVRTC_4BPPV1_Format;break;case 3:e=4,a=t.RGBA_PVRTC_4BPPV1_Format;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",m)}return r.dataPtr=52+i,r.bpp=e,r.format=a,r.width=s,r.height=p,r.numSurfaces=u,r.numMipmaps=P,r.isCubemap=6===u,n(r)}(o):559044176===a[11]?function(r){var e,a,o=r.header,i=o[0],m=o[1],p=o[2],s=o[3],u=o[4],P=o[10],d=o[12],_=24,f=255&u,h=P>0;25===f?(a=h?t.RGBA_PVRTC_4BPPV1_Format:t.RGB_PVRTC_4BPPV1_Format,e=4):f===_?(a=h?t.RGBA_PVRTC_2BPPV1_Format:t.RGB_PVRTC_2BPPV1_Format,e=2):console.error("THREE.PVRLoader: Unknown PVR format:",f);return r.dataPtr=i,r.bpp=e,r.format=a,r.width=p,r.height=m,r.numSurfaces=d,r.numMipmaps=s+1,r.isCubemap=6===d,n(r)}(o):void console.error("THREE.PVRLoader: Unknown PVR format.")},a}(a.CompressedTextureLoader);function n(r){var e,a={mipmaps:[],width:r.width,height:r.height,format:r.format,mipmapCount:r.numMipmaps,isCubemap:r.isCubemap},t=r.buffer,o=r.dataPtr,n=0,i=0,m=0,p=0,s=0,u=r.bpp,P=r.numSurfaces;2===u?(i=8,m=4):(i=4,m=4),e=i*m*u/8,a.mipmaps.length=r.numMipmaps*P;for(var d=0;d<r.numMipmaps;){var _=r.width>>d,f=r.height>>d;(p=_/i)<2&&(p=2),(s=f/m)<2&&(s=2),n=p*s*e;for(var h=0;h<P;h++){var R={data:new Uint8Array(t,o,n),width:_,height:f};a.mipmaps[h*r.numMipmaps+d]=R,o+=n}d++}return a}r.PVRLoader=o,Object.defineProperty(r,"__esModule",{value:!0})}));
