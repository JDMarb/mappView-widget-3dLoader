/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./FileLoader","./Loader","../textures/DataTexture","../textures/Data3DTexture","../math/Vector3","../constants"],(function(e,a,r,t,i,n,p,o){"use strict";var l=function(e){function t(){return e.apply(this,arguments)||this}a.inheritsLoose(t,e);var l=t.prototype;return l.load=function(e,a,t,i){var n=this,p=new r.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("text"),p.load(e,(function(r){try{a(n.parse(r))}catch(a){i?i(a):console.error(a),n.manager.itemError(e)}}),t,i)},l.parse=function(e){e=e.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();for(var a=null,r=null,t=new p.Vector3(0,0,0),l=new p.Vector3(1,1,1),s=e.split(/[\n\r]+/g),g=null,d=0,u=0,m=s.length;u<m;u++){var c=s[u].trim(),h=c.split(/\s/g);switch(h[0]){case"TITLE":a=c.substring(7,c.length-1);break;case"LUT_3D_SIZE":var F=h[1];r=parseFloat(F),g=new Uint8Array(r*r*r*4);break;case"DOMAIN_MIN":t.x=parseFloat(h[1]),t.y=parseFloat(h[2]),t.z=parseFloat(h[3]);break;case"DOMAIN_MAX":l.x=parseFloat(h[1]),l.y=parseFloat(h[2]),l.z=parseFloat(h[3]);break;default:var T=parseFloat(h[0]),w=parseFloat(h[1]),L=parseFloat(h[2]);if(T>1||T<0||w>1||w<0||L>1||L<0)throw new Error("LUTCubeLoader : Non normalized values not supported.");g[d+0]=255*T,g[d+1]=255*w,g[d+2]=255*L,g[d+3]=255,d+=4}}var y=new i.DataTexture;y.image.data=g,y.image.width=r,y.image.height=r*r,y.type=o.UnsignedByteType,y.magFilter=o.LinearFilter,y.minFilter=o.LinearFilter,y.wrapS=o.ClampToEdgeWrapping,y.wrapT=o.ClampToEdgeWrapping,y.generateMipmaps=!1,y.needsUpdate=!0;var x=new n.Data3DTexture;return x.image.data=g,x.image.width=r,x.image.height=r,x.image.depth=r,x.type=o.UnsignedByteType,x.magFilter=o.LinearFilter,x.minFilter=o.LinearFilter,x.wrapS=o.ClampToEdgeWrapping,x.wrapT=o.ClampToEdgeWrapping,x.wrapR=o.ClampToEdgeWrapping,x.generateMipmaps=!1,x.needsUpdate=!0,{title:a,size:r,domainMin:t,domainMax:l,texture:y,texture3D:x}},t}(t.Loader);e.LUTCubeLoader=l,Object.defineProperty(e,"__esModule",{value:!0})}));
