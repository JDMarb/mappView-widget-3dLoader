/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","../math/Sphere","../math/Vector3","../core/BufferAttribute","../core/BufferGeometry","./FileLoader","./Loader","../core/InstancedBufferGeometry","../core/InstancedBufferAttribute","../core/InterleavedBufferAttribute","../core/InterleavedBuffer","../utils"],(function(e,r,t,a,n,i,u,f,o,d,s,v,l){"use strict";var c=function(e){function f(r){return e.call(this,r)||this}r.inheritsLoose(f,e);var c=f.prototype;return c.load=function(e,r,t,a){var n=this,i=new u.FileLoader(n.manager);i.setPath(n.path),i.setRequestHeader(n.requestHeader),i.setWithCredentials(n.withCredentials),i.load(e,(function(t){try{r(n.parse(JSON.parse(t)))}catch(r){a?a(r):console.error(r),n.manager.itemError(e)}}),t,a)},c.parse=function(e){var r={},u={};function f(e,t){if(void 0!==r[t])return r[t];var a=e.interleavedBuffers[t],n=function(e,r){if(void 0!==u[r])return u[r];var t=e.arrayBuffers[r],a=new Uint32Array(t).buffer;return u[r]=a,a}(e,a.buffer),i=l.getTypedArray(a.type,n),f=new v.InterleavedBuffer(i,a.stride);return f.uuid=a.uuid,r[t]=f,f}var c=e.isInstancedBufferGeometry?new o.InstancedBufferGeometry:new i.BufferGeometry,m=e.data.index;if(void 0!==m){var p=l.getTypedArray(m.type,m.array);c.setIndex(new n.BufferAttribute(p,1))}var y=e.data.attributes;for(var B in y){var b=y[B],g=void 0;if(b.isInterleavedBufferAttribute){var h=f(e.data,b.data);g=new s.InterleavedBufferAttribute(h,b.itemSize,b.offset,b.normalized)}else{var A=l.getTypedArray(b.type,b.array);g=new(b.isInstancedBufferAttribute?d.InstancedBufferAttribute:n.BufferAttribute)(A,b.itemSize,b.normalized)}void 0!==b.name&&(g.name=b.name),void 0!==b.usage&&g.setUsage(b.usage),void 0!==b.updateRange&&(g.updateRange.offset=b.updateRange.offset,g.updateRange.count=b.updateRange.count),c.setAttribute(B,g)}var I=e.data.morphAttributes;if(I)for(var w in I){for(var S=I[w],z=[],R=0,G=S.length;R<G;R++){var L=S[R],T=void 0;if(L.isInterleavedBufferAttribute){var x=f(e.data,L.data);T=new s.InterleavedBufferAttribute(x,L.itemSize,L.offset,L.normalized)}else{var _=l.getTypedArray(L.type,L.array);T=new n.BufferAttribute(_,L.itemSize,L.normalized)}void 0!==L.name&&(T.name=L.name),z.push(T)}c.morphAttributes[w]=z}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);var D=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==D)for(var H=0,P=D.length;H!==P;++H){var q=D[H];c.addGroup(q.start,q.count,q.materialIndex)}var C=e.data.boundingSphere;if(void 0!==C){var F=new a.Vector3;void 0!==C.center&&F.fromArray(C.center),c.boundingSphere=new t.Sphere(F,C.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c},f}(f.Loader);e.BufferGeometryLoader=c,Object.defineProperty(e,"__esModule",{value:!0})}));
