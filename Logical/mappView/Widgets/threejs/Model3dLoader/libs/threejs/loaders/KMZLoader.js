/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./FileLoader","../objects/Group","./Loader","./LoadingManager","./ColladaLoader","../libs/fflate.module"],(function(e,r,a,o,t,n,i,l){"use strict";var s=function(e){function t(r){return e.call(this,r)||this}r.inheritsLoose(t,e);var s=t.prototype;return s.load=function(e,r,o,t){var n=this,i=new a.FileLoader(n.manager);i.setPath(n.path),i.setResponseType("arraybuffer"),i.setRequestHeader(n.requestHeader),i.setWithCredentials(n.withCredentials),i.load(e,(function(a){try{r(n.parse(a))}catch(r){t?t(r):console.error(r),n.manager.itemError(e)}}),o,t)},s.parse=function(e){var r=new n.LoadingManager;r.setURLModifier((function(e){var r=function(e){for(var r in a)if(r.slice(-e.length)===e)return a[r]}(e);if(r){console.log("Loading",e);var o=new Blob([r.buffer],{type:"application/octet-stream"});return URL.createObjectURL(o)}return e}));var a=l.unzipSync(new Uint8Array(e));if(a["doc.kml"]){var t=(new DOMParser).parseFromString(l.strFromU8(a["doc.kml"]),"application/xml").querySelector("Placemark Model Link href");if(t)return new i.ColladaLoader(r).parse(l.strFromU8(a[t.textContent]))}else for(var s in console.warn("KMZLoader: Missing doc.kml file."),a){if("dae"===s.split(".").pop().toLowerCase())return new i.ColladaLoader(r).parse(l.strFromU8(a[s]))}return console.error("KMZLoader: Couldn't find .dae file."),{scene:new o.Group}},t}(t.Loader);e.KMZLoader=s,Object.defineProperty(e,"__esModule",{value:!0})}));
