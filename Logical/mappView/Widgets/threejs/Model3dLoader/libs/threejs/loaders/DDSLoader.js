/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./CompressedTextureLoader","../constants"],(function(r,e,a,t){"use strict";var o=function(r){function a(e){return r.call(this,e)||this}return e.inheritsLoose(a,r),a.prototype.parse=function(r,e){var a={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function o(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function n(r,e,a,t){for(var o=a*t*4,n=new Uint8Array(r,e,o),i=new Uint8Array(o),m=0,u=0,s=0;s<t;s++)for(var p=0;p<a;p++){var h=n[u],d=n[++u],c=n[++u],f=n[++u];u++,i[m]=c,i[++m]=d,i[++m]=h,i[++m]=f,m++}return i}var i,m=o("DXT1"),u=o("DXT3"),s=o("DXT5"),p=o("ETC1"),h=new Int32Array(r,0,31);if(542327876!==h[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),a;var d,c=h[21],f=!1;switch(c){case m:i=8,a.format=t.RGB_S3TC_DXT1_Format;break;case u:i=16,a.format=t.RGBA_S3TC_DXT3_Format;break;case s:i=16,a.format=t.RGBA_S3TC_DXT5_Format;break;case p:i=8,a.format=t.RGB_ETC1_Format;break;default:if(!(32===h[22]&&16711680&h[23]&&65280&h[24]&&255&h[25]&&4278190080&h[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(d=c,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))),a;f=!0,i=64,a.format=t.RGBAFormat}a.mipmapCount=1,131072&h[2]&&!1!==e&&(a.mipmapCount=Math.max(1,h[7]));var C=h[28];if(a.isCubemap=!!(512&C),a.isCubemap&&(!(1024&C)||!(2048&C)||!(4096&C)||!(8192&C)||!(16384&C)||!(32768&C)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),a;a.width=h[4],a.height=h[3];for(var l=h[1]+4,v=a.isCubemap?6:1,D=0;D<v;D++)for(var T=a.width,_=a.height,b=0;b<a.mipmapCount;b++){var A=void 0,w=void 0;f?w=(A=n(r,l,T,_)).length:(w=Math.max(4,T)/4*Math.max(4,_)/4*i,A=new Uint8Array(r,l,w));var S={data:A,width:T,height:_};a.mipmaps.push(S),l+=w,T=Math.max(T>>1,1),_=Math.max(_>>1,1)}return a},a}(a.CompressedTextureLoader);r.DDSLoader=o,Object.defineProperty(r,"__esModule",{value:!0})}));
