/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../_virtual/_rollupPluginBabelHelpers","./Camera","../math/MathUtils"],(function(t,i,e,s){"use strict";var o=function(t){function e(i,e,s,o){var h;return void 0===i&&(i=50),void 0===e&&(e=1),void 0===s&&(s=.1),void 0===o&&(o=2e3),(h=t.call(this)||this).isPerspectiveCamera=!0,h.type="PerspectiveCamera",h.fov=i,h.zoom=1,h.near=s,h.far=o,h.focus=10,h.aspect=e,h.view=null,h.filmGauge=35,h.filmOffset=0,h.updateProjectionMatrix(),h}i.inheritsLoose(e,t);var o=e.prototype;return o.copy=function(i,e){return t.prototype.copy.call(this,i,e),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=null===i.view?null:Object.assign({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this},o.setFocalLength=function(t){var i=.5*this.getFilmHeight()/t;this.fov=2*s.RAD2DEG*Math.atan(i),this.updateProjectionMatrix()},o.getFocalLength=function(){var t=Math.tan(.5*s.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},o.getEffectiveFOV=function(){return 2*s.RAD2DEG*Math.atan(Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom)},o.getFilmWidth=function(){return this.filmGauge*Math.min(this.aspect,1)},o.getFilmHeight=function(){return this.filmGauge/Math.max(this.aspect,1)},o.setViewOffset=function(t,i,e,s,o,h){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=e,this.view.offsetY=s,this.view.width=o,this.view.height=h,this.updateProjectionMatrix()},o.clearViewOffset=function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},o.updateProjectionMatrix=function(){var t=this.near,i=t*Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom,e=2*i,o=this.aspect*e,h=-.5*o,a=this.view;if(null!==this.view&&this.view.enabled){var f=a.fullWidth,r=a.fullHeight;h+=a.offsetX*o/f,i-=a.offsetY*e/r,o*=a.width/f,e*=a.height/r}var n=this.filmOffset;0!==n&&(h+=t*n/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+o,i,i-e,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},o.toJSON=function(i){var e=t.prototype.toJSON.call(this,i);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e},e}(e.Camera);t.PerspectiveCamera=o,Object.defineProperty(t,"__esModule",{value:!0})}));
