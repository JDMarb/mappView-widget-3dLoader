/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
define(["exports","../math/Matrix4","../math/MathUtils","./PerspectiveCamera"],(function(e,a,t,r){"use strict";var s=new a.Matrix4,o=new a.Matrix4,c=new a.Matrix4,i=function(){function e(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new r.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new r.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return e.prototype.update=function(e){var a=this._cache;if(a.focus!==e.focus||a.fov!==e.fov||a.aspect!==e.aspect*this.aspect||a.near!==e.near||a.far!==e.far||a.zoom!==e.zoom||a.eyeSep!==this.eyeSep){a.focus=e.focus,a.fov=e.fov,a.aspect=e.aspect*this.aspect,a.near=e.near,a.far=e.far,a.zoom=e.zoom,a.eyeSep=this.eyeSep,c.copy(e.projectionMatrix);var r,i,n=a.eyeSep/2,p=n*a.near/a.focus,m=a.near*Math.tan(t.DEG2RAD*a.fov*.5)/a.zoom;o.elements[12]=-n,s.elements[12]=n,r=-m*a.aspect+p,i=m*a.aspect+p,c.elements[0]=2*a.near/(i-r),c.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(c),r=-m*a.aspect-p,i=m*a.aspect-p,c.elements[0]=2*a.near/(i-r),c.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(c)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(o),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(s)},e}();e.StereoCamera=i,Object.defineProperty(e,"__esModule",{value:!0})}));
